package com.bjcareer.GPTService.out.api.gpt.thema.prompt;

import java.time.LocalDate;

import com.bjcareer.GPTService.config.AppConfig;

public class ThemaQuestionPrompt {
	public static final String QUESTION_PROMPT =
		"이 뉴스의 발행일은 %s입니다.\n"
			+ "오늘의 날짜는" + LocalDate.now(AppConfig.ZONE_ID) + "입니다.\n"
			+ "기사 내용: <article>%s</article>\n"
			+ "내가 알고 있는 테마 목록은 다음과 같습니다: <themas>%s</themas>\n\n"

			+ "Imagine three experts evaluating a news article's relevance to the stock market.\n"
			+ "Each expert will analyze the article step by step and refine their conclusions collaboratively.\n"
			+ "The content of the news article is provided within <article></article> tags.\n\n"

			+ "질문리스트\n"
			+ "1.뉴스 기사가 주식시장에 영향을 미칠 가능성이 있는지 평가하세요.\n"
			+ "2.기사의 주제를 분석하여 테마를 추출해주세요.\n"
			+ "3.기사의 내용을 분석하여 반대편의 이득인 산업 또는 인물을 추출해주세요..\n"

			+ "**1단계: 뉴스 주제 필터링**\n"
			+ "- `<article></article>` 태그 내 뉴스의 주제를 분류합니다.\n"
			+ "- 뉴스 주제가 아래 항목 중 하나에 해당하지 않는 경우 '관련없음'으로 분류합니다:\n"
			+ "  1. 사회: 사회적 변화, 트렌드, 또는 문제점.\n"
			+ "  2. 경제: 금융시장, 거시경제 동향, 또는 기업 활동.\n"
			+ "  3. 정책: 정부 정책 발표, 규제 변경, 또는 법안 통과.\n"
			+ "  4. 산업: 특정 산업 동향, 기술 발전, 또는 시장 변화.\n"
			+ "  5. 정치: 정치인의 발언, 행동, 또는 정책적 사건.\n"
			+ "- 아래 기준에 해당하는 경우 '관련없음'으로 분류합니다:\n"
			+ "  1. 단순히 시장 전반의 긍정적 또는 부정적 분위기를 설명하는 뉴스.\n"
			+ "  2. 특정 주식, 산업 또는 정책에 대한 구체적 언급이 없는 뉴스.\n"
			+ "  3. 거래일, 공휴일 등에 따른 일반적인 시장 변동만 언급된 뉴스.\n"
			+ "- 예시:\n"
			+ "  - '뉴욕증시는 추수감사절이 낀 주의 첫 거래일을 상승세로 시작했습니다.' → 관련없음.\n"
			+ "  - '정부가 전기차 구매 보조금을 20%% 인상하기로 결정.' → 관련있음.\n"
			+ "  - 'AI 기술 발전이 제조업 생산성을 25%% 증가시켰다.' → 관련있음.\n\n"

			+ "**2단계: 홍보성 기사 평가**\n"
			+ "- 뉴스가 특정 회사, 제품 또는 서비스의 광고로 보이는지 평가합니다.\n"
			+ "- 아래 기준에 해당하면 '관련없음'으로 분류하고 평가를 종료합니다:\n"
			+ "  1. 경쟁사나 시장과 비교 없이 특정 회사의 성과만 반복 강조.\n"
			+ "  2. 회사 제품이나 서비스의 광고에만 집중.\n"
			+ "  3. 과장된 표현이나 긍정적 언어(예: '혁신적', '타의 추종을 불허하는 품질') 사용.\n\n"

			+ "**3단계: 사건의 파급력 분석**\n"
			+ "- 사건의 규모와 영향력을 평가합니다:\n"
			+ "  1. 특정 지역에만 국한된 사건은 '지역적 사건'으로 간주하여 '관련없음'으로 분류.\n"
			+ "  2. 국가적 또는 산업 전반에 영향을 미치는 경우 다음 단계로 진행.\n"
			+ "- 예시:\n"
			+ "  - '서울 구청의 노인 복지 예산 증액 발표.' → 지역적 사건 → 관련없음.\n"
			+ "  - '국가 예산안 통과.' → 국가적 사건 → 관련있음.\n\n"

			+ "**4단계: 정책 및 기술 관련 평가**\n"
			+ "- 정책 발표, 규제 변경 또는 기술 발전이 주식시장에 영향을 미칠 가능성이 있는지 평가합니다.\n"
			+ "  1. 정책이나 기술의 구체적 내용과 적용 대상 확인.\n"
			+ "  2. 시장 심리 또는 투자 압력을 자극할 가능성 분석.\n"
			+ "- 예시:\n"
			+ "  - '정부가 재생에너지 보조금 30%% 증액 발표.' → 관련있음.\n"
			+ "  - '특정 지역 공단의 기술 도입.' → 지역적 사건 → 관련없음.\n\n"

			+ "**5단계: 인물 관련 테마 평가**\n"
			+ "- 정치인, 기업 리더 등 인물이 주식시장에 미칠 영향을 평가합니다:\n"
			+ "  1. 발언, 행동 또는 법적 사건이 주요 원인으로 제시된 경우.\n"
			+ "  2. 해당 인물이 특정 테마주에 영향을 미칠 가능성.\n"
			+ "- 예시:\n"
			+ "  - '이재명 대표의 무죄 판결 이후 관련 테마주 상승.' → 관련있음.\n"
			+ "  - '지역구 의원의 법안 발의.' → 지역적 사건 → 관련없음.\n\n"

			+ "**6단계: 주식시장 영향 평가**\n"
			+ "- 뉴스 내용이 주식시장에 미칠 가능성을 분석합니다:\n"
			+ "  1. 직접적인 경제적, 산업적 연관성 확인.\n"
			+ "  2. 간접적으로 시장 심리 또는 투자 압력을 자극할 가능성 평가.\n"
			+ "- 주식시장에 영향을 미칠 가능성이 명확하면 '관련있음', 그렇지 않으면 '관련없음'으로 평가.\n\n"

			+ "**최종 평가 기준**\n"
			+ "- 각 단계의 결과를 종합하여 뉴스 기사가 '관련있음' -> true"
			+ "관련없음이면 false.\n"

			+ "질문: 테마키워드와 이유를 알려주세요.\n\n"

			+ "단계 1: **주요 이유 식별**\n"
			+ "- 기사 내용을 원인과 결과 형식으로 요악합니다. 원인과 결과가 불명확한 경우는 기사 내용을 요약하는 방식을 선택합니다.\n"
			+ "- 식별된 이유를 사용하여 다음 단계로 진행합니다.\n\n"

			+ "단계 2: **주요 이유를 키워드로 변환**\n"
			+ "- 기사 내용을 바탕으로 원인을 간결하고 강렬한 키워드로 변환합니다.\n"
			+ "- 키워드는 주제의 핵심을 나타내며, 독립적으로도 직관적인 의미를 전달할 수 있어야 합니다.\n"
			+ "- 보다 일반적인 표현보다는 사건이나 기술, 현상의 중심 개념을 선택하세요.\n"
			+ "- 예:\n"
			+ "  - '딥페이크 기술을 활용한 투자 사기 사건 발생' → 키워드: '딥페이크'\n"
			+ "  - '정부가 재생 에너지 보조금을 발표' → 키워드: '재생 에너지'\n"
			+ "  - '자율주행 기술 규제 완화 정책 발표' → 키워드: '자율주행'\n"
			+ "- 세부적인 사건을 포괄할 수 있는 키워드를 우선적으로 선택합니다.\n"

			+ "단계 3: **산업, 정책, 또는 기술 기반 테마 추출**\n"
			+ "- 테마는 산업 동향, 정책 변화, 또는 기술 발전과 같은 광범위한 개념을 나타내야 합니다.\n"
			+ "- 이벤트가 여러 산업이나 프로젝트에 걸쳐 있는 경우, 가장 영향력이 높다고 판단되는 테마를 우선적으로 선택하세요.\n"
			+ "- 사건이 특정 인물과 직접적으로 연관되어 있을 경우, 해당 인물의 이름을 우선적으로 테마로 사용하세요.\n"
			+ "- 기사가 여러 개의 테마를 포함하는 경우 다음 기준에 따라 가장 강력한 하나를 선택합니다:\n"
			+ "  1. 기사에서 가장 빈번하게 언급되거나 강조된 테마.\n"
			+ "  2. 경제적, 산업적 파급력이 가장 큰 테마.\n"
			+ "  3. 시장 심리에 직접적으로 영향을 미칠 가능성이 높은 테마.\n"
			+ "- 예시:\n"
			+ "  - '미국의 PCE 물가 급등과 연준의 금리 인하 계획 불확실성.'\n"
			+ "    → 테마: '연준 정책' (경제적 파급력이 더 크다고 판단).\n"
			+ "  - '우크라이나 재건 프로젝트와 재생 에너지 보조금 발표.'\n"
			+ "    → 테마: '우크라이나 재건' (국제적 파급력 더 큼).\n"
			+ "  - '오세훈 서울시장의 여론조사 비용 논란이 정치자금법 위반으로 확대.'\n"
			+ "    → 테마: '오세훈' (정치적 사건 중심).\n"
			+ "- 유효한 테마를 추출할 수 없는 경우, 단계 5로 진행합니다.\n\n"

			+ "단계 3.1: **테마 이름 간결화 규칙 추가**\n"
			+ "- 테마 이름은 구체적인 사건이나 정책보다는 해당 사건을 대표할 수 있는 간결하고 포괄적인 키워드로 구성해야 합니다.\n"
			+ "- 지나치게 구체적인 사건 설명은 생략하고, 주제를 포괄할 수 있는 대표 키워드만 사용하세요.\n"
			+ "- 예시:\n"
			+ "  - '자율주행 기술 규제 완화' → 테마: '자율주행'\n"
			+ "  - '재생 에너지 보조금 정책 발표' → 테마: '재생 에너지'\n"
			+ "  - '우크라이나 농업 재건 프로젝트' → 테마: '우크라이나 재건'\n"
			+ "- 간결한 키워드는 테마 분석 및 분류의 일관성을 유지하는 데 도움을 줍니다.\n"

			+ "단계 4: **테마 이름의 일관성 보장**\n"
			+ "- 테마 이름은 일관성이 있어야 합니다.\n"
			+ "- 사용자가 질문한 내용에 <themes> </themes> 태그에 비슷한 맥락의 테마가 존재하면 해당 단어를 테마로 채택합니다.\n"
			+ "- 비슷한 단어가 없다면 새로운 테마를 생성합니다.\n"
			+ "- 비슷한 테마를 탐색할 때, 유사도 기준(예: Cosine Similarity, 임계값 0.8 이상)을 사용하여 결정합니다.\n"
			+ "- 유사도가 임계값에 미치지 못하면 새로운 테마로 생성합니다.\n"

			+ "단계 5: **출력 형식 정의**\n"
			+ "- 테마와 원인을 다음 형식으로 출력하세요:\n"
			+ "  - 테마: [테마 이름]\n"
			+ "  - 원인: [원인 이름]\n"
			+ "- 유효한 테마가 없는 경우, 빈 객체를 사용하세요(예: 테마: \"\", 원인: \"\").\n"
			+ "- 테마와 원인은 반드시 한국어로 작성되어야 합니다. 원래 텍스트가 외국어인 경우, 적절히 번역하여 제공하세요.\n"
			+ "- 날짜는 반드시 YYYY-MM-DD 형식을 따라야 합니다.\n"

			+ "### 질문: 이 기사를 통해서 이득보는 테마가 무엇이야?\n\n"

			+ "### 평가 과정\n\n"

			+ "**단계 1: 기사 내용에서 부정적인 테마 식별**\n"
			+ "- 기사 내용을 분석하여 부정적인 영향을 받은 주요 테마를 추출합니다.\n"
			+ "- 부정적인 테마는 기사 내에서 직접적으로 언급된 산업, 기업, 정책, 또는 기술을 기반으로 합니다.\n"
			+ "- 예시:\n"
			+ "  - 기사: '구글이 반독점 제재를 받았다.' → 부정 테마: '구글'\n"
			+ "  - 기사: '전기차 배터리 공급망 부족 문제.' → 부정 테마: '전기차'\n\n"

			+ "**단계 2: 반대편 테마 탐색**\n"
			+ "- 부정적인 테마로 인해 이득을 볼 수 있는 반대편 테마를 식별합니다.\n"
			+ "- 반대 테마는 기사에 직접적으로 언급되지 않더라도, 논리적으로 이득을 볼 가능성이 있는 산업, 기업, 또는 정책으로 확장됩니다.\n"
			+ "- 예시:\n"
			+ "  - 부정 테마: '구글'\n"
			+ "  - 반대 테마: '메타' (구글의 반독점 제재로 인해 경쟁사가 이득을 볼 가능성)\n\n"

			+ "**단계 3: 질문지 기반 테마 매칭**\n"
			+ "- 질문지에 제공된 테마 리스트와 반대 테마를 매칭합니다.\n"
			+ "- 유사도 기준(예: Cosine Similarity, 임계값 0.8 이상)을 사용하여 근접한 테마를 선택합니다.\n"
			+ "- 유사도가 임계값에 미치지 못하면, 기사 내용에 가장 적합한 새로운 반대 테마를 생성합니다.\n"
			+ "- 예시:\n"
			+ "  - 부정 테마: '전기차'\n"
			+ "  - 질문지 테마: ['재생 가능 에너지', '전기차 대체 기술'] → 반대 테마: '전기차 대체 기술'\n\n"

			+ "**단계 4: 반대 테마 간 선택**\n"
			+ "- 반대 테마가 여러 개 식별된 경우, 가장 강력한 하나만 선택합니다.\n"
			+ "- 강력한 반대 테마를 선택하는 기준:\n"
			+ "  1. 기사 맥락에서 가장 직접적인 영향을 미치는 테마.\n"
			+ "  2. 산업 전반에 미칠 파급력이 가장 큰 테마.\n"
			+ "  3. 기사에 언급된 사건이나 이슈와 가장 논리적으로 연결된 테마.\n"
			+ "- 예시:\n"
			+ "  - 부정 테마: '전기차 배터리 공급망 부족'\n"
			+ "  - 반대 테마 후보: ['전기차 대체 기술', '에너지 저장 기술'] → 선택된 테마: '전기차 대체 기술'\n\n"

			+ "**단계 5: 문맥 기반 검증**\n"
			+ "- 선택된 반대 테마가 기사 내용과 논리적으로 일치하는지 검증합니다.\n"
			+ "- 기사 맥락과 반대 테마가 맞지 않을 경우, 근접한 다른 테마를 재검토합니다.\n\n"

			+ "**단계 6: 출력 형식 정의**\n"
			+ "- 다음 형식으로 반대 테마와 이유를 출력하세요:\n"
			+ "  - 반대 테마: [테마 이름]\n"
			+ "  - 이유: [반대 테마를 선택한 이유]\n"
			+ "- 적합한 반대 테마를 찾을 수 없는 경우:\n"
			+ "  - 반대 테마: \"\"\n"
			+ "  - 이유: \"\"\n"

			+ "### 출력 요구사항\n"
			+ "- 응답은 반드시 한국어로 작성되어야 합니다.\n";
}
