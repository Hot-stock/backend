package com.bjcareer.GPTService.out.api.gpt.news.Prompt;

import java.time.LocalDate;

import com.bjcareer.GPTService.config.AppConfig;

public class QuestionPrompt {
	public static String QUESTION_FORMAT =
		"이 뉴스의 발행일은 %s 입니다.\n"
			+ "오늘의 날짜는 " + LocalDate.now(AppConfig.ZONE_ID) + "입니다.\n"
			+ "주식 이름: <stock> %s </stock>\n"
			+ "테마 내역: <themas>%s</themas>\n\n"
			+ "기사 제목: %s\n"
			+ "기사 내용: <article> %s </article>\n" + "기사는 질문지에 제공한 주식 이름을 중점으로 분석해줘"

			+ "Act like an investor specializing in theme stocks. Analyze the provided article to identify the reasons behind the stock price increases, categorize them into investment themes, and organize these themes in a database for effective management and tracking."
			+ "Based on those stocks, think of a strategy to extract detailed themes from articles for theme stock investment.\n"
			+ "Generate three ideas and evaluate each theme's representativeness, informational value, and reusability."
			+ "and encourage students to learn more about theme stocks. Use 3 different platforms and methods to reach thema.\n\n"

			+ "Generate 3 ideas and evaluate how well each theme represents the stocks.\n"
			+ "While doing this, assess how effective each idea is in connecting students with theme stocks, "
			+ "its feasibility, and how engaging it is for the target audience.\n\n"

			+ "Refine each idea to make the educational strategies clearer and more structured. \n"
			+ "Carefully analyze the pros and cons of each activity. Break down the educational challenge into smaller parts, \n"
			+ "evaluate possible solutions, and select the most effective strategy based on your findings.\n\n"

			+ "Step 1: **Extract Stock Name and Remove XML Tags**\n"
			+ "- Retrieve the Stock name from within the <stock> </stock> XML tags.\n"
			+ "- Remove the XML tags within <article> </article>.\n\n"

			+ "### GUIDELINE 0\n\n"

			+ "Step 2: **Summarize the Content**\n"
			+ "- Summarize the content of the article provided within <article> </article>, focusing on the stock name.\n"
			+ "- Include details relevant to why the stock name might have risen.\n"
			+ "- Avoid speculative language and focus only on explicitly mentioned reasons.\n"
			+ "- Complete the summary and finalize the response.\n\n"

			+ "Step 3: **Check for Explicit Reasons**\n"
			+ "- Validate if the summarized reasons are explicitly supported by the article content.\n"
			+ "- Discard speculative or inferred reasons unless backed by clear evidence in the article.\n"
			+ "- Refine the summary to ensure it aligns strictly with the provided facts.\n\n"

			+ "Step 4: **Focus on Stock-Specific Reasons**\n"
			+ "- Ensure the summary answers why the stock name mentioned within <stock> </stock> might have risen.\n"
			+ "- Highlight only the reasons directly tied to the stock's performance as described in the article.\n"
			+ "- Eliminate any unrelated or tangential information to maintain focus."

			+ "### GUIDELINE 1: How to Determine Relevance to the Stock\n\n"
			+ "Use only the facts mentioned in the article."
			+ "Brand reputation index, brand image improvement, awards, internal programs, certifications, etc., are classified as 'Not Relevant.'\n"

			+ "Step 1: **Identify Causes of Stock Price Increase**\n"
			+ "- 기사에 구체적인 외부요인이 언급되어 있지 않다면 '관련 없음'으로 평가합니다.\n"
			+ "If the article does not explicitly mention reasons for stock price changes, classify it as 'Not Relevant.'\n"
			+ "   - If the article discusses a collaboration or agreement and the counterpart is a university, organization, or non-corporate entity or 대학교가 설립한 기관, classify the article as **'IRRELEVANT'**. then return false\n"
			+ "   - If the article discusses a collaboration or agreement and the counterpart is a major corporation, foreign multinational company, or involves significant technological agreements, classify the article as **'RELEVANT'**."
			+ "- News about business agreements should be classified as 'irrelevant' if the contracting party is not a monopoly or a foreign multinational corporation.\n"
			+ "- Evaluate the direct connection between explicitly stated facts in the article and corporate activities.\n"
			+ "- Stock price increases resulting from benefits due to specific policies are classified as 'relevant.'\n"
			+ "- If the causes of stock price increases corresponding to the stock names provided within <stock> </stock> tags in the article cannot be identified, classify it as 'irrelevant.' In this case, the causes must be based on facts mentioned in the article, not opinions.\n"
			+ "- If regional or industrial policy changes do not include specific investment plans or activities, classify them as 'irrelevant.'\n"
			+ "- Speculative projections like 'private investments are expected to follow' are classified as 'irrelevant.'\n"
			+ "- Mentions of specific companies used merely as examples in an industrial context are also classified as 'irrelevant.'\n"
			+ "- If the article mentions an agreement but does not include any information about stock price increases, it should also be classified as 'irrelevant.'\n"
			+ "- If the stock in question is a thematic stock linked to a specific politician, and the article provides explanations about changes related to that politician, classify it as relevant and return 'true.'\n\n"

			+ "**Step 2: Initial Relevance Check**\n"
			+ "- If the article does not mention or is unrelated to the specific stock name provided in the question, classify it as 'IRRELEVANT.'\n"
			+ "- If the article only briefly mentions the stock name or theme without providing detailed or actionable context, classify it as 'IRRELEVANT.'\n"
			+ "- If the article mentions only the stock's performance (e.g., hitting upper limit or percentage increase) without explaining the underlying reasons, classify it as 'IRRELEVANT.'\n"
			+ "- If deemed relevant, proceed to the next step; otherwise, classify it as 'IRRELEVANT.'\n\n"

			+ "Step 3: Check for Political Relevance\n"
			+ "- Evaluate whether the article mentions political figures, events, or issues directly related to the stock.\n"
			+ "- Consider the following as indicators of political relevance:\n"
			+ "  1. Political figures: Specific mentions of politicians or election candidates (e.g., '안철수', '윤석열').\n"
			+ "- If any of the above criteria are met, classify the article as politically relevant and return 'true'.\n"

			+ "**Step 4: Assess the Purpose of the Article**\n"
			+ "- Based on the summarized content, evaluate whether the article clearly explains the reason for the stock's increase or performance.\n"
			+ "- Classify the article as 'IRRELEVANT' in the following cases:\n"
			+ "  1. If the explanation relies solely on financial metrics (e.g., past performance, generic financial analysis) that are not direct causes of the increase.\n"
			+ "  2. If it fails to provide clear external or internal reasons for the increase, such as significant investor activities, economic policies, or market events.\n"
			+ "  3. If the article mentions internal company strategies (e.g., restructuring, leadership changes) but lacks external validation or broader market implications, classify it as 'IRRELEVANT.'\n"
			+ "  4. If the article attributes the stock's increase to generic investor behavior (e.g., foreign or institutional buying), classify it as 'IRRELEVANT.'\n"
			+ "  5. If the article primarily discusses financial metrics (e.g., institutional net buying/selling, trading volume), classify it as 'IRRELEVANT.'\n"
			+ "  6. If the article attributes stock performance to projections or forecasts (e.g., positive outlook for revenue or profit) without specifying the source or context of the announcement, classify it as 'IRRELEVANT.'\n"
			+ "  7. If the article mentions only the stock's performance metrics (e.g., hitting upper limit or percentage increase) without providing the reasons behind the performance, classify it as 'IRRELEVANT.'\n\n"

			+ "- Additional Filtering:\n"
			+ "  - If the primary reason for the stock's rise is attributed to bargain hunting or general rebounds driven by foreign investor net buying, classify it as 'IRRELEVANT.'\n"
			+ "  - If the rise is deemed specific to the company and unlikely to affect other companies, classify it as 'IRRELEVANT.'\n"
			+ "  - Evaluate if the reasons provided have potential broader impacts on other companies. Use the following criteria:\n"
			+ "    1. The reasons should be based on broad external factors such as specific industries, policies, or economic changes.\n"
			+ "    2. Political events or policy announcements must clearly indicate potential impacts on the overall industry or market.\n"
			+ "    3. If political events are specified as affecting only a particular company, assess the scope explicitly.\n"
			+ "    4. Distinguish between facts and opinions: If the article relies on unsupported speculation or opinions, classify it as 'IRRELEVANT.'\n"
			+ "       - Example: Statements like 'This event might affect other countries' are speculative unless supported by data.\n"
			+ "    5. If the article highlights industry trends or policy ripple effects rather than individual company success, classify it as 'RELEVANT.'\n"
			+ "  - If the article does not clearly state the direct involvement of the specific stock in policies or events, classify it as 'IRRELEVANT.'\n"
			+ "  - If speculative phrases such as 'is expected to benefit' or 'may influence' are used without evidence, classify it as 'IRRELEVANT.'\n"
			+ "  - If the policies or events mentioned are generalized without clear focus on the specific stock, classify it as 'IRRELEVANT.'\n"
			+ "  - If the article primarily highlights awards, certifications, or internal programs that do not clearly link to financial or market performance, classify it as 'IRRELEVANT.'\n"
			+ "  - If the news improves brand image but lacks clear evidence of economic impact or market influence, classify it as 'IRRELEVANT.'\n\n"

			+ "**Step 5: Analyze the Reasons for the Stock Increase**\n"
			+ "If the article does not mention that the stock has increased, it should be classified as 'IRRELEVANT.'"
			+ "- Identify and explain the primary reasons for the stock's increase or performance.\n"
			+ "- A simple evaluation stating that the stock rose due to the rise of the related industry group is classified as irrelevant.\n"
			+ "- Classify the article as 'RELEVANT' if the increase is linked to:\n"
			+ "  1. Corporate growth factors, such as policy changes, new product launches, or mergers and acquisitions.\n"
			+ "  2. External events or conditions directly impacting the stock's performance, such as competitor disruptions, government subsidies, or major economic shifts.\n"
			+ "  3. Future events that are highly likely to impact the stock's performance, such as announced product launches, upcoming partnerships, or significant market expansions.\n"
			+ "- Classify the article as 'IRRELEVANT' if:\n"
			+ "  - The reasons are unclear, speculative, or unrelated to the stock's performance.\n"
			+ "  - The primary reasons do not represent actionable trends or impactful changes in the market or industry.\n"
			+ "  - The reasons rely only on investor behavior (e.g., net buying/selling) without additional external factors.\n"
			+ "  - The article only highlights stock performance metrics (e.g., hitting upper limit or percentage increase) without explaining the reasons behind the performance.\n\n"

			+ "**Final Decision**\n"
			+ "- If all steps conclude the content as 'RELEVANT,' return TRUE.\n"
			+ "- If any step classifies the content as 'IRRELEVANT,' return FALSE.\n"

			+ "GUIDELINE 2: This news thema?\n"
			+ "1. If the article mentions factors such as internal announcements, earnings reports, patents, mergers, or company-specific events, classify it as 'false' (single-company factor).\n"
			+ "   Example: 'Company A's earnings grew by 20%%, resulting in a stock price increase.' → false\n\n"

			+ "2. If the article highlights political, economic, or social events that affect multiple companies, or uses terms like 'related stocks,' classify it as 'true' (theme).\n"
			+ "   Example: 'Electric vehicle demand surges, boosting related stocks including Company A, B, and C.' → true\n\n"

			+ "3. Key decision criteria:\n"
			+ "   - Does the article mention multiple companies impacted by a common factor?\n"
			+ "   - Are external macroeconomic or industry-wide events driving the movement?\n"
			+ "   - Does the article explicitly reference 'related stocks' or thematic groups?\n\n"

			+ "Your output should be 'false' for single-company factors and 'true' for broader impacts.\n"
			+ "Process the following input:\n\n"
			+ "The question is: 'Does the article describe a stock price movement caused by factors specific to a single company, or is it related to a broader theme involving multiple companies?'\n"

			+ "### Explain the Importance of the Next Date\n"
			+ "**Step 1: Analyze the Importance of the Date**\n"
			+ "- Explain why the extracted date is important.\n"
			+ "- This step involves dividing the information into facts and opinions.\n\n"

			+ "**Fact**\n"
			+ "- Include only the information explicitly stated in the article about the date.\n"
			+ "- Example: If the date refers to a specific event (e.g., 'shareholder meeting,' 'new product launch,' 'policy implementation date'), explain what is explicitly stated.\n"
			+ "- Provide concrete data based on the article, quoting or paraphrasing directly from it.\n\n"

			+ "**Opinion**\n"
			+ "- Provide reasonable interpretations based on the content of the article.\n"
			+ "- Example: 'The stock price may rise on this date,' or 'This event is likely to attract investor attention.'\n"
			+ "- Add context or extrapolate logical conclusions beyond what is directly mentioned in the article.\n\n"

			+ "**Example**\n"
			+ "- Fact: 'According to the article, December 1, 2024, is the date when a major policy change will be implemented.'\n"
			+ "- Opinion: 'This policy change is expected to drive growth in the relevant industry and attract investor interest.'\n\n"

			+ "Extract Stock Rise Keywords\n"
			+ "reason 필드에서 설명한 주가 상승 원인을 키워드로 추출합니다.\n"
			+ "단어의 획일화를 위해서 인물이 추출되면 인물의 이름만을 사용하고, 제품이 추출되면 제품의 고유한 이름을 사용합니다."
			+ "확장적인 단어보단 폐쇄적 단어를 사용합니다 예를들면 정치적 이벤트 -> 탄핵소추안"
			+ "키워드는 없을 수도 있습니다."

			+ "**GUIDELINE 3: 질문지에 제공된 <stock></stock> 주식은 어떤 테마가 될 수 있는지 알고 싶어요. **\n"
			+ "<article></article> XML에는 뉴스 기사가 포함되어 있습니다. 이 기사에서 <stock></stock> XML 태그에 언급된 주식 이름을 중심으로 기사를 분석하세요.\n\n"

			+ "### 1단계: 주식 상승의 직접적인 원인 추출\n"
			+ "- 기사를 분석하여 주식 상승의 이유를 확인합니다. 원인과 결과가 명확히 드러나며, 사실에 기반해야 합니다.\n"
			+ "- 기사에 해당 주식이 '~~관련주'로 명시되어 있고, 해당 내용을 바탕으로 상승했다면 '~~관련주'를 테마 이름으로 사용하고 바로 결과를 출력하세요.\n"

			+ "- 주식 상승 이유에 '수혜 기대감'이 언급되었다면, 해당 수혜 기대감의 원인을 테마 이름으로 도출하세요.\n"
			+ "- 기사를 통해 다음과 같은 층위를 추출하세요:\n"
			+ "  1. **배경 지식**: 주식 상승과 관련된 광범위한 맥락.\n"
			+ "  2. **1차 원인**: 주식 상승의 구체적이고 직접적인 이유.\n"
			+ "  3. **최종 원인**: 주식 상승에 가장 직접적인 영향을 미친 핵심 요인.\n"
			+ "- 예시:\n"
			+ "  - '현대로템과 코레일이 우즈베키스탄 철도청의 고속차량 수주에 성공하며 한국산 고속차량의 해외 진출이 이루어짐.'\n"
			+ "    - 배경 지식: 해외 진출.\n"
			+ "    - 1차 원인: 현대로템과 코레일의 수주.\n"
			+ "    - 최종 원인: 철도 관련주.\n\n"

			+ "### 2단계: 테마 이름 도출\n"
			+ "- 최종 원인이 인물, 정책, 기술, 정치적 사건, 또는 산업인지에 따라 테마를 도출하는 방법이 달라집니다.\n\n"

			+ "**인물:**\n"
			+ "- **반드시 기사에 등장하는 인물 이름만 사용해야 합니다.**\n"
			+ "- 기사에서 명시적으로 언급된 경우, 인물 이름을 테마로 사용해야 합니다. 불특정한 '정치테마주'와 같은 테마 이름은 사용할 수 없습니다.\n"
			+ "- 예시:\n"
			+ "  - '한동훈 국민의힘 대표와 관련된 발언으로 주가 변동이 발생함.' → 테마명: 한동훈\n"
			+ "  - '조국 관련주가 조국의 지지율에 따라 급등락함.' → 테마명: 조국\n\n"

			+ "**정책:**\n"
			+ "- **명시되지 않은 정책 이름은 테마로 사용하지 않습니다.**\n"
			+ "- 기사에서 명시적으로 언급된 정책 이름을 테마로 사용합니다.\n"
			+ "- 예시:\n"
			+ "  - '북미정상회담으로 인해 관련 주식들이 상승함.' → 테마명: 북미정상회담\n"
			+ "  - '이재명의 지역화폐 예산 증액으로 관련 주식 상승.' → 테마명: 지역화폐\n\n"

			+ "**기술:**\n"
			+ "- 기업이 개발한 제품 또는 기술이 최종 원인이라면, 이를 테마 이름으로 사용합니다.\n"
			+ "- 기술 이름이 구체적이지 않다면, 이를 일반화하여 사용하세요.\n"
			+ "- 예시:\n"
			+ "  - '초전도체 제작 금속 소재.' → 테마명: 초전도체\n"
			+ "  - '양자 기술.' → 테마명: 양자컴퓨터\n\n"

			+ "**정치적 사건:**\n"
			+ "- 질문지에 언급된 사실만 사용하세요.\n"
			+ "- 정치적 사건은 배경 원인으로 간주하며, 최종 원인과 배경 원인을 분리해 파악하고 최종 원인을 테마로 사용하세요.\n"
			+ "- 예시:\n"
			+ "  - '탄소 중립 선언으로 친환경 에너지 관련 주식 상승.'\n"
			+ "    - 배경 원인: 탄소 중립 선언.\n"
			+ "    - 1차 원인: 친환경 에너지.\n"
			+ "    - 테마명: 친환경 에너지.\n"
			+ "  - '조기 대선 기대감으로 일자리 관련 주식 상승.'\n"
			+ "    - 배경 원인: 조기 대선.\n"
			+ "    - 1차 원인: 일자리 관련 주식.\n"
			+ "    - 테마명: 일자리 관련 주식.\n\n"

			+ "**산업:**\n"
			+ "- 기사에서 명시된 산업명을 그대로 사용합니다.\n"
			+ "- 예시:\n"
			+ "  - '코로나19로 인해 홈트레이닝 산업이 성장.' → 테마명: 홈트레이닝\n"
			+ "  - 'AI 데이터센터의 전력 수요 증가.' → 테마명: AI 데이터센터\n\n"

			+ "### 3단계: 부가적인 단어 삭제\n"
			+ "- 부가적 설명 단어를 제거하고 핵심 키워드만 남깁니다.\n"
			+ "- 예시:\n"
			+ "  - '우원식 정치적 영향력' → 우원식\n"
			+ "  - '세종시 관련 주' → 세종시\n"
			+ "  - 'AI 데이터센터 전력 수요 증가' → AI 데이터센터\n\n"

			+ "### 4단계: 테마 이름 도출 이유 설명\n"
			+ "- 테마 이름을 도출한 이유를 명확히 설명하세요.\n"
			+ "- 테마 이름이 주식 상승의 원인을 명확히 설명하는지 검토하세요.\n\n"

			+ "### 최종 테마 선정\n"
			+ "- <themas> XML에는 기존 테마가 ','로 구분되어 저장되어 있습니다.\n"
			+ "- 기존 테마와 새로 도출한 테마를 비교하여 단어 유사도가 0.6 이상이거나 의미적으로 유사하다면 기존 테마를 사용하세요.\n"
			+ "- 예시:\n"
			+ "  - 기존 테마: 양자컴퓨터, 북미정상회담. 도출된 테마: 양자암호 → 최종 테마: 양자컴퓨터.\n"
			+ "- 변경 여부와 그 이유를 명확히 설명하세요.\n"

			+ "### Output Requirements\n"
			+ "- The response must be written in Korean.\n";
}

